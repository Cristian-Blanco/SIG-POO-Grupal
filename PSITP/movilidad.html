<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Movilidad en el Barrio Potos√≠</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="estilosM.css" />
</head>
<body>
  <!-- Secci√≥n del mapa -->
  <section class="seccion-movilidad">
    <h2>Movilidad en el Barrio Potos√≠, Suba</h2>
    <div class="map-container">
      <div id="map"></div>
    </div>
  </section>

  <!-- Secci√≥n del tutorial -->
  <section class="seccion-tutorial">
    <h2>¬øC√≥mo se construy√≥ este mapa interactivo?</h2>
    <p>Este mapa fue desarrollado utilizando tecnolog√≠as web modernas, siguiendo buenas pr√°cticas de desarrollo cartogr√°fico. A continuaci√≥n, te explicamos paso a paso c√≥mo se hizo, con detalles t√©cnicos y conceptos clave.</p>

    <ol class="tutorial-list">
      <li>
        <strong>1. Descarga de los datos geoespaciales en formato GeoJSON</strong>
        <p>El proyecto comienza con dos archivos clave en formato <strong>GeoJSON</strong>, el est√°ndar abierto para datos geogr√°ficos:</p>
        <ul>
          <li><strong><code>potosi.geojson</code></strong>: Define el pol√≠gono del barrio Potos√≠ en Suba. Este archivo contiene un <code>Polygon</code> o <code>MultiPolygon</code> con coordenadas en <strong>WGS 84 (EPSG:4326)</strong>, el sistema de referencia global que usan Leaflet y OpenStreetMap.</li>
          <li><strong><code>Paraderos_Zonales_del_SITP.geojson</code></strong>: Contiene miles de puntos (<code>Point</code>) que representan los paraderos del SITP en Bogot√°. Se descarg√≥ desde la plataforma oficial: <a href="https://datosabiertos-transmilenio.hub.arcgis.com/datasets/paraderos-zonales-del-sitp/explore" target="_blank">ArcGIS Open Data - TransMilenio</a>.</li>
        </ul>
        <p>‚úÖ Ambos archivos deben estar en la misma carpeta que el proyecto para que <code>fetch()</code> los cargue correctamente.</p>
      </li>

      <li>
        <strong>2. Inicializaci√≥n del mapa con Leaflet</strong>
        <p>Se us√≥ <a href="https://leafletjs.com" target="_blank">Leaflet</a>, la biblioteca JavaScript l√≠der para mapas interactivos, por su simplicidad, rendimiento y compatibilidad con m√≥viles.</p>
        <p>El mapa se inicializa en un elemento HTML con <code>id="map"</code> y se centra en el barrio Potos√≠:</p>
        <pre><code>var map = L.map('map').setView([4.653, -74.085], 14);</code></pre>
        <p>El nivel de zoom <code>14</code> permite ver detalles urbanos como calles y paraderos.</p>
      </li>

      <li>
        <strong>3. Carga de la capa base: OpenStreetMap</strong>
        <p>Leaflet no incluye mapas por defecto. Se a√±ade una capa de teselas (tiles) de <strong>OpenStreetMap</strong>, un mapa base gratuito y de c√≥digo abierto:</p>
        <pre><code>L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);</code></pre>
        <p>Esta capa proporciona el fondo del mapa y es esencial para contextualizar los datos.</p>
      </li>

      <li>
        <strong>4. Dibujar el pol√≠gono del barrio</strong>
        <p>Con <code>fetch()</code>, se carga <code>potosi.geojson</code> y se agrega al mapa como una capa vectorial:</p>
        <pre><code>L.geoJSON(data, {
  style: estiloBarrio,
  onEachFeature: function (feature, layer) {
    layer.bindPopup('<b>Barrio Potos√≠</b><br>Localidad: Suba');
  }
}).addTo(map);</code></pre>
        <p>El estilo define el color naranja del borde y relleno. <code>onEachFeature</code> permite agregar popups a cada elemento.</p>
      </li>

      <li>
        <strong>5. Filtrar paraderos dentro del barrio con Turf.js</strong>
        <p>Leaflet no puede verificar si un punto est√° dentro de un pol√≠gono. Para eso, se usa <a href="https://turfjs.org" target="_blank">Turf.js</a>, una librer√≠a geoespacial potente.</p>
        <p>El c√≥digo convierte el GeoJSON del barrio a un pol√≠gono con <code>turf.polygon()</code> y verifica cada paradero:</p>
        <pre><code>if (turf.booleanPointInPolygon(punto, barrioPolygon)) {
  // Mostrar solo si est√° dentro
}</code></pre>
        <p>Este filtro asegura que solo se muestren los paraderos relevantes.</p>
      </li>

      <li>
        <strong>6. Agregar marcadores interactivos</strong>
        <p>Cada paradero se representa con un marcador usando el emoji üöå, creado con <code>L.divIcon()</code>:</p>
        <pre><code>const iconoParadero = L.divIcon({
  html: 'üöå',
  className: 'paradero-icon',
  iconSize: [30, 30]
});</code></pre>
        <p>Al hacer clic, se abre un popup con informaci√≥n √∫til: nombre, direcci√≥n bandera, c√≥digo cenefa y localidad.</p>
      </li>

      <li>
        <strong>7. Dise√±o y experiencia de usuario</strong>
        <p>El mapa es <strong>mobile-friendly</strong>, con controles t√°ctiles como:</p>
        <ul>
          <li>Arrastre con inercia</li>
          <li>Pinzamiento para zoom</li>
          <li>Desplazamiento con rueda del mouse</li>
        </ul>
        <p>Los estilos CSS personalizados mejoran la presentaci√≥n, y los popups se adaptan a cualquier dispositivo.</p>
      </li>

      <li>
        <strong>8. Ejecuci√≥n local con Live Server</strong>
        <p>Para evitar errores de <em>CORS</em> al cargar archivos locales, se usa un servidor local como <strong>Live Server</strong> (extensi√≥n de VS Code).</p>
        <p>La URL debe ser <code>http://localhost:5500</code>, no <code>file://</code>.</p>
      </li>
    </ol>

    <h3>¬øPor qu√© Leaflet?</h3>
    <p>Leaflet fue elegido porque:</p>
    <ul>
      <li>Es <strong>ligero</strong> (~42 KB) y sin dependencias externas.</li>
      <li>Tiene una <strong>API clara y bien documentada</strong>.</li>
      <li>Soporta <strong>GeoJSON, capas vectoriales y controles personalizados</strong>.</li>
      <li>Es compatible con <strong>m√≥viles y escritorio</strong>.</li>
      <li>Tiene miles de <strong>plugins</strong> para extender funcionalidades.</li>
    </ul>

    <p><strong>Resultado final:</strong> Un mapa interactivo, preciso y educativo, que combina datos abiertos, tecnolog√≠as web y buenas pr√°cticas de desarrollo.</p>
    <p>Este proyecto es <strong>reutilizable</strong>: cambia los archivos GeoJSON y funciona en cualquier barrio de Bogot√°.</p>
  </section>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Turf.js para operaciones geoespaciales -->
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

  <!-- Tu JS -->
  <script src="proyectoM.js"></script>
</body>
</html>