<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parques de Marichuela</title>
    <link rel="stylesheet" href="estilos.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <style>
        /* Contenedor principal en flex */
        #contenedor {
            display: flex;
            height: calc(100vh - 120px);
            transition: all 0.3s ease;
        }
        /* Mapa ocupa todo al inicio */
        #mapa {
            flex: 1 0 100%;
            transition: flex 0.3s ease;
        }
        /* Panel derecho oculto por defecto */
        #info {
            display: none;
            flex: 1;
            padding: 20px;
            background-color: white;
            overflow-y: auto;
        }
        #info img {
            max-width: 100%;
            border-radius: 10px;
        }
        .btn-cerrar {
            background: crimson;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <!-- Encabezado -->
    <header>
        <div class="logo">
            <img src="logo.png" alt="Logo">
        </div>
        <h1>Parques de Marichuela</h1>
    </header>

    <!-- Menú -->
    <nav>
        <ul class="menu">
            <li class="menu-item" id="equipamientos">Equipamientos
                <ul class="submenu">
                    <li><a href="ubicacion.html">Ubicación</a></li>
                    <li><a href="movilidad.html">Movilidad</a></li>
                    <li><a href="parques.html">Parques</a></li>
                    <li><a href="catastro3d.html">Catastro 3D</a></li>
                    <li><a href="recorrido_virtual.html">Recorrido Virtual</a></li>
                    <li><a href="vias.html">Vías</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <!-- Contenedor -->
    <div id="contenedor">
        <div id="mapa"></div>
        <div id="info">
            <h2>Seleccione un parque en el mapa</h2>
            <p>Haga clic sobre un parque para ver su descripción general.</p>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer-fixed">
        ©️ 2025 Barrio Marichuela - Todos los derechos reservados. <br>
        Diseño y desarrollo por AKA
    </div>

    <!-- Scripts Leaflet -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        const mapa = L.map('mapa').setView([4.562, -74.145], 16);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '©️ OpenStreetMap'
        }).addTo(mapa);

        const infoParques = {
            "Parque Principal": {
                img: "parque_principal.jpg",
                desc: "Este es el parque principal de Marichuela, un punto de encuentro para la comunidad con zonas verdes, juegos y espacios deportivos."
            },
            "Parque Infantil": {
                img: "parque_infantil.jpg",
                desc: "Parque diseñado para el disfrute de los niños, con columpios, resbaladeros y un ambiente seguro."
            },
            "Parque Lineal": {
                img: "parque_lineal.jpg",
                desc: "Un parque alargado que conecta diferentes sectores del barrio, ideal para caminar, trotar y montar bicicleta."
            }
        };

        const infoDiv = document.getElementById('info');
        const mapaDiv = document.getElementById('mapa');

        // Función para cerrar panel
        function cerrarPanel() {
            infoDiv.style.display = 'none';
            mapaDiv.style.flex = '1 0 100%';
        }

        // Cargar GeoJSON
        fetch('Parques-Marichuela.geojson')
            .then(res => res.json())
            .then(data => {
                L.geoJSON(data, {
                    onEachFeature: (feature, layer) => {
                        if (feature.properties && feature.properties.Nombre) {
                            layer.bindPopup(feature.properties.Nombre);
                            layer.on('click', () => {
                                const nombre = feature.properties.Nombre;
                                infoDiv.style.display = 'block';
                                mapaDiv.style.flex = '1'; // Reducir mapa para mostrar panel
                                
                                if (infoParques[nombre]) {
                                    infoDiv.innerHTML = `
                                        <button class="btn-cerrar" onclick="cerrarPanel()">Cerrar</button>
                                        <h2>Descripción general</h2>
                                        <h3>${nombre}</h3>
                                        <img src="${infoParques[nombre].img}" alt="${nombre}">
                                        <p>${infoParques[nombre].desc}</p>
                                    `;
                                } else {
                                    infoDiv.innerHTML = `
                                        <button class="btn-cerrar" onclick="cerrarPanel()">Cerrar</button>
                                        <h2>Descripción general</h2>
                                        <h3>${nombre}</h3>
                                        <p>No hay descripción disponible para este parque.</p>
                                    `;
                                }
                            });
                        }
                    },
                    style: {
                        color: "green",
                        weight: 2,
                        fillOpacity: 0.4
                    }
                }).addTo(mapa);
            });
    </script>
</body>
</html>
